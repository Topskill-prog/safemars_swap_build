{"version":3,"file":"static/chunks/1647.94d6d3c7b767513e.js","mappings":"mNAOMA,EAAqB,IAAIC,IAAJ,CAAQ,CAAEC,WAAW,IAAQC,QAAQC,GAMjD,SAAeC,EAAaC,G,OAAbD,EAAY,sB,SAAZA,I,OAAAA,GAAf,iBAA4BC,G,IACnCC,EAEGC,EACDC,EACAC,EACFC,EAGKC,EAWHC,EAGFb,EAAAA,EADIc,E,iEArBJP,GAAiBQ,EAAAA,EAAAA,GAAUT,GAExBE,EAAI,E,sBAAGA,EAAID,EAAKS,QAAM,O,KACvBP,EAAMF,EAAKC,GACXE,EAASF,IAAMD,EAAKS,OAAS,EAC/BL,OAAAA,E,iBAES,O,sBAAA,C,EAAMM,MAAMR,I,cAAvBE,EAAW,S,aAGX,GAFOC,EAAK,SACZM,QAAQN,MAAM,uBAAwBN,EAASM,GAC3CF,EAAQ,MAAM,IAAIS,MAAM,2BAAmC,OAARb,IACvD,O,YAGF,IAAKK,EAASS,GAAI,CAChB,GAAIV,EAAQ,MAAM,IAAIS,MAAM,2BAAmC,OAARb,IACvD,O,KAGW,O,EAAMK,EAASE,Q,OAC5B,GADMA,EAAO,UACRb,EAAmBa,GAMtB,MALMC,EAIE,QAHNd,EAAyB,QAAzBA,EAAAA,EAAmBqB,cAAM,IAAzBrB,OAAAA,EAAAA,EAA2BsB,QAAe,SAACC,EAAMX,G,IACLA,EAApCY,EAAM,GAA8BZ,OAA3B,EAAea,SAAS,KAAuB,OAAP,QAAbb,EAAAA,EAAMc,eAAO,IAAbd,EAAAA,EAAiB,IAC3D,OAAOW,EAAKP,OAAS,EAAI,GAAYQ,OAATD,EAAK,MAAQ,OAAJC,GAAQ,GAAO,OAAJA,KAC/C,WAAG,IAHNxB,EAAAA,EAGU,gBACN,IAAImB,MAAM,iCAAkD,OAAjBL,IAEnD,MAAO,C,EAAAD,G,cA1BwBL,I,aA4BjC,MAAM,IAAIW,MAAM,2CA/BwB,wB,qBCR3B,SAASJ,EAAUY,GAEhC,OADiBA,EAAIC,MAAM,KAAK,GAAGC,eAEjC,IAAK,QACH,MAAO,CAACF,GACV,IAAK,OACH,MAAO,CAAE,QAAwB,OAAjBA,EAAIG,UAAU,IAAMH,GACtC,IAAK,O,IACUA,EAAPI,EAAuC,QAAhCJ,EAAAA,EAAIK,MAAM,8BAAsB,IAAhCL,OAAAA,EAAAA,EAAmC,GAChD,MAAO,CAAE,oCAAwC,OAALI,EAAK,KAAK,wBAA4B,OAALA,EAAK,MACpF,IAAK,O,IACUJ,EAAPM,EAAuC,QAAhCN,EAAAA,EAAIK,MAAM,8BAAsB,IAAhCL,OAAAA,EAAAA,EAAmC,GAChD,MAAO,CAAE,oCAAwC,OAALM,EAAK,KAAK,wBAA4B,OAALA,EAAK,MACpF,QACE,MAAO,I","sources":["webpack://_N_E/./packages/token-lists/src/getTokenList.ts","webpack://_N_E/./packages/utils/uriToHttp.ts"],"sourcesContent":["/* eslint-disable no-continue */\n/* eslint-disable no-await-in-loop */\nimport { TokenList } from '@uniswap/token-lists'\nimport schema from '@uniswap/token-lists/src/tokenlist.schema.json'\nimport Ajv from 'ajv'\nimport uriToHttp from '@pancakeswap/utils/uriToHttp'\n\nconst tokenListValidator = new Ajv({ allErrors: true }).compile(schema)\n\n/**\n * Contains the logic for resolving a list URL to a validated token list\n * @param listUrl list url\n */\nexport default async function getTokenList(listUrl: string): Promise<TokenList> {\n  const urls: string[] = uriToHttp(listUrl)\n\n  for (let i = 0; i < urls.length; i++) {\n    const url = urls[i]\n    const isLast = i === urls.length - 1\n    let response\n    try {\n      response = await fetch(url)\n    } catch (error) {\n      console.error('Failed to fetch list', listUrl, error)\n      if (isLast) throw new Error(`Failed to download list ${listUrl}`)\n      continue\n    }\n\n    if (!response.ok) {\n      if (isLast) throw new Error(`Failed to download list ${listUrl}`)\n      continue\n    }\n\n    const json = await response.json()\n    if (!tokenListValidator(json)) {\n      const validationErrors: string =\n        tokenListValidator.errors?.reduce<string>((memo, error) => {\n          const add = `${(error as any).dataPath} ${error.message ?? ''}`\n          return memo.length > 0 ? `${memo}; ${add}` : `${add}`\n        }, '') ?? 'unknown error'\n      throw new Error(`Token list failed validation: ${validationErrors}`)\n    }\n    return json as TokenList\n  }\n  throw new Error('Unrecognized list URL protocol.')\n}\n","/* eslint-disable no-case-declarations */\n/**\n * Given a URI that may be ipfs, ipns, http, or https protocol, return the fetch-able http(s) URLs for the same content\n * @param uri to convert to fetch-able http url\n */\nexport default function uriToHttp(uri: string): string[] {\n  const protocol = uri.split(':')[0].toLowerCase()\n  switch (protocol) {\n    case 'https':\n      return [uri]\n    case 'http':\n      return [`https${uri.substring(4)}`, uri]\n    case 'ipfs':\n      const hash = uri.match(/^ipfs:(\\/\\/)?(.*)$/i)?.[2]\n      return [`https://cloudflare-ipfs.com/ipfs/${hash}/`, `https://ipfs.io/ipfs/${hash}/`]\n    case 'ipns':\n      const name = uri.match(/^ipns:(\\/\\/)?(.*)$/i)?.[2]\n      return [`https://cloudflare-ipfs.com/ipns/${name}/`, `https://ipfs.io/ipns/${name}/`]\n    default:\n      return []\n  }\n}\n"],"names":["tokenListValidator","Ajv","allErrors","compile","schema","getTokenList","listUrl","urls","i","url","isLast","response","error","json","validationErrors","uriToHttp","length","fetch","console","Error","ok","errors","reduce","memo","add","dataPath","message","uri","split","toLowerCase","substring","hash","match","name"],"sourceRoot":""}